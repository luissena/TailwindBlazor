@page "/docs"

<PageTitle>Docs — TailwindBlazor</PageTitle>

<div class="max-w-7xl mx-auto px-6 py-16">
    <div class="lg:flex lg:gap-12">

        <!-- Sidebar -->
        <nav class="hidden lg:block lg:w-56 flex-shrink-0">
            <div class="sticky top-24 space-y-1">
                @foreach (var (id, label, indent) in _sections)
                {
                    <a href="@($"/docs#{id}")" data-enhance-nav="false"
                       class="@($"block px-3 py-1.5 text-sm text-gray-400 hover:text-white rounded-lg hover:bg-white/[0.04] transition-colors{(indent ? " pl-6" : "")}")">@label</a>
                }
            </div>
        </nav>

        <!-- Content -->
        <div class="flex-1 min-w-0 max-w-3xl">

            <!-- Getting Started -->
            <section id="getting-started" class="mb-20">
                <h1 class="text-4xl font-bold tracking-tight mb-4">Getting Started</h1>
                <p class="text-gray-400 text-lg mb-8 leading-relaxed">
                    TailwindBlazor integrates Tailwind CSS v4 into your Blazor app with zero external dependencies.
                    No Node.js, no npm, no manual CLI installs.
                </p>

                <h3 class="text-lg font-semibold mb-3">1. Install the package</h3>
                <div class="rounded-xl bg-white/[0.03] border border-white/[0.06] overflow-hidden mb-6">
                    <div class="flex items-center gap-2 px-4 py-2 border-b border-white/[0.04]">
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="ml-2 text-[11px] text-gray-500 font-mono">terminal</span>
                    </div>
                    <pre class="px-5 py-4 overflow-x-auto"><code class="font-mono text-sm"><span class="text-gray-500">$</span> dotnet add package TailwindBlazor</code></pre>
                </div>

                <h3 class="text-lg font-semibold mb-3">2. Create the CSS entry point</h3>
                <p class="text-sm text-gray-400 mb-3">
                    Create a file at <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">Styles/app.css</code> in your project root:
                </p>
                <div class="rounded-xl bg-white/[0.03] border border-white/[0.06] overflow-hidden mb-6">
                    <div class="flex items-center gap-2 px-4 py-2 border-b border-white/[0.04]">
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="ml-2 text-[11px] text-gray-500 font-mono">Styles/app.css</span>
                    </div>
                    <pre class="px-5 py-4 overflow-x-auto"><code class="font-mono text-sm"><span class="text-violet-400">@@import</span> <span class="text-green-400">"tailwindcss"</span>;</code></pre>
                </div>

                <h3 class="text-lg font-semibold mb-3">3. Register the service</h3>
                <p class="text-sm text-gray-400 mb-3">
                    Add one line to your <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">Program.cs</code>:
                </p>
                <div class="rounded-xl bg-white/[0.03] border border-white/[0.06] overflow-hidden mb-6">
                    <div class="flex items-center gap-2 px-4 py-2 border-b border-white/[0.04]">
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="ml-2 text-[11px] text-gray-500 font-mono">Program.cs</span>
                    </div>
                    <pre class="px-5 py-4 overflow-x-auto"><code class="font-mono text-sm"><span class="text-violet-400">using</span> TailwindBlazor;

<span class="text-violet-400">var</span> builder = WebApplication.<span class="text-blue-400">CreateBuilder</span>(args);
builder.<span class="text-violet-400">UseTailwind</span>();</code></pre>
                </div>

                <h3 class="text-lg font-semibold mb-3">4. Reference the generated CSS</h3>
                <p class="text-sm text-gray-400 mb-3">
                    Add the stylesheet link in your <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">App.razor</code> or <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">_Host.cshtml</code>:
                </p>
                <div class="rounded-xl bg-white/[0.03] border border-white/[0.06] overflow-hidden mb-6">
                    <div class="flex items-center gap-2 px-4 py-2 border-b border-white/[0.04]">
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="ml-2 text-[11px] text-gray-500 font-mono">App.razor</span>
                    </div>
                    <pre class="px-5 py-4 overflow-x-auto"><code class="font-mono text-sm"><span class="text-gray-500">&lt;</span><span class="text-red-400">link</span> <span class="text-violet-400">rel</span>=<span class="text-green-400">"stylesheet"</span> <span class="text-violet-400">href</span>=<span class="text-green-400">"css/tailwind.css"</span> <span class="text-gray-500">/&gt;</span></code></pre>
                </div>

                <h3 class="text-lg font-semibold mb-3">5. Use Tailwind classes</h3>
                <div class="rounded-xl bg-white/[0.03] border border-white/[0.06] overflow-hidden">
                    <div class="flex items-center gap-2 px-4 py-2 border-b border-white/[0.04]">
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="w-2 h-2 rounded-full bg-white/10"></span>
                        <span class="ml-2 text-[11px] text-gray-500 font-mono">Home.razor</span>
                    </div>
                    <pre class="px-5 py-4 overflow-x-auto"><code class="font-mono text-sm"><span class="text-gray-500">&lt;</span><span class="text-red-400">h1</span> <span class="text-violet-400">class</span>=<span class="text-green-400">"text-3xl font-bold text-gray-900"</span><span class="text-gray-500">&gt;</span>
    Hello, TailwindBlazor!
<span class="text-gray-500">&lt;/</span><span class="text-red-400">h1</span><span class="text-gray-500">&gt;</span></code></pre>
                </div>
            </section>

            <!-- Configuration -->
            <section id="configuration" class="mb-20">
                <h2 class="text-3xl font-bold tracking-tight mb-4">Configuration</h2>
                <p class="text-gray-400 mb-8 leading-relaxed">
                    TailwindBlazor works out of the box with sensible defaults. Everything is overridable through
                    MSBuild properties, C# options, or appsettings.json.
                </p>

                <!-- MSBuild -->
                <div id="msbuild-properties" class="mb-12">
                    <h3 class="text-xl font-semibold mb-4">MSBuild Properties</h3>
                    <p class="text-sm text-gray-400 mb-4">
                        Set these in your <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">.csproj</code> to control build-time behavior:
                    </p>
                    <div class="rounded-xl bg-white/[0.03] border border-white/[0.06] overflow-hidden mb-6">
                        <div class="flex items-center gap-2 px-4 py-2 border-b border-white/[0.04]">
                            <span class="w-2 h-2 rounded-full bg-white/10"></span>
                            <span class="w-2 h-2 rounded-full bg-white/10"></span>
                            <span class="w-2 h-2 rounded-full bg-white/10"></span>
                            <span class="ml-2 text-[11px] text-gray-500 font-mono">.csproj</span>
                        </div>
                        <pre class="px-5 py-4 overflow-x-auto"><code class="font-mono text-sm"><span class="text-gray-500">&lt;</span><span class="text-red-400">PropertyGroup</span><span class="text-gray-500">&gt;</span>
  <span class="text-gray-500">&lt;</span><span class="text-blue-400">TailwindVersion</span><span class="text-gray-500">&gt;</span><span class="text-gray-200">4.1.18</span><span class="text-gray-500">&lt;/</span><span class="text-blue-400">TailwindVersion</span><span class="text-gray-500">&gt;</span>
  <span class="text-gray-500">&lt;</span><span class="text-blue-400">TailwindInputFile</span><span class="text-gray-500">&gt;</span><span class="text-gray-200">Styles/app.css</span><span class="text-gray-500">&lt;/</span><span class="text-blue-400">TailwindInputFile</span><span class="text-gray-500">&gt;</span>
  <span class="text-gray-500">&lt;</span><span class="text-blue-400">TailwindOutputFile</span><span class="text-gray-500">&gt;</span><span class="text-gray-200">wwwroot/css/tailwind.css</span><span class="text-gray-500">&lt;/</span><span class="text-blue-400">TailwindOutputFile</span><span class="text-gray-500">&gt;</span>
  <span class="text-gray-500">&lt;</span><span class="text-blue-400">TailwindEnabled</span><span class="text-gray-500">&gt;</span><span class="text-gray-200">true</span><span class="text-gray-500">&lt;/</span><span class="text-blue-400">TailwindEnabled</span><span class="text-gray-500">&gt;</span>
  <span class="text-gray-500">&lt;</span><span class="text-blue-400">TailwindMinify</span><span class="text-gray-500">&gt;</span><span class="text-gray-200">false</span><span class="text-gray-500">&lt;/</span><span class="text-blue-400">TailwindMinify</span><span class="text-gray-500">&gt;</span>
<span class="text-gray-500">&lt;/</span><span class="text-red-400">PropertyGroup</span><span class="text-gray-500">&gt;</span></code></pre>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="border-b border-white/[0.06]">
                                    <th class="text-left py-3 pr-6 text-gray-400 font-medium">Property</th>
                                    <th class="text-left py-3 pr-6 text-gray-400 font-medium">Default</th>
                                    <th class="text-left py-3 text-gray-400 font-medium">Description</th>
                                </tr>
                            </thead>
                            <tbody class="font-mono text-xs">
                                <tr class="border-b border-white/[0.04]">
                                    <td class="py-3 pr-6 text-violet-400/70">TailwindVersion</td>
                                    <td class="py-3 pr-6 text-gray-400">4.1.18</td>
                                    <td class="py-3 text-gray-400 font-sans text-sm">Tailwind CLI version to download</td>
                                </tr>
                                <tr class="border-b border-white/[0.04]">
                                    <td class="py-3 pr-6 text-violet-400/70">TailwindInputFile</td>
                                    <td class="py-3 pr-6 text-gray-400">Styles/app.css</td>
                                    <td class="py-3 text-gray-400 font-sans text-sm">CSS entry point relative to project root</td>
                                </tr>
                                <tr class="border-b border-white/[0.04]">
                                    <td class="py-3 pr-6 text-violet-400/70">TailwindOutputFile</td>
                                    <td class="py-3 pr-6 text-gray-400">wwwroot/css/tailwind.css</td>
                                    <td class="py-3 text-gray-400 font-sans text-sm">Generated CSS output path</td>
                                </tr>
                                <tr class="border-b border-white/[0.04]">
                                    <td class="py-3 pr-6 text-violet-400/70">TailwindEnabled</td>
                                    <td class="py-3 pr-6 text-gray-400">true</td>
                                    <td class="py-3 text-gray-400 font-sans text-sm">Enable/disable the build target</td>
                                </tr>
                                <tr>
                                    <td class="py-3 pr-6 text-violet-400/70">TailwindMinify</td>
                                    <td class="py-3 pr-6 text-gray-400">$(Optimize)</td>
                                    <td class="py-3 text-gray-400 font-sans text-sm">Minify output (auto in Release)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- C# Options -->
                <div id="csharp-options" class="mb-12">
                    <h3 class="text-xl font-semibold mb-4">C# Options</h3>
                    <p class="text-sm text-gray-400 mb-4">
                        Configure the runtime hosted service via the <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">UseTailwind</code> overload:
                    </p>
                    <div class="rounded-xl bg-white/[0.03] border border-white/[0.06] overflow-hidden">
                        <div class="flex items-center gap-2 px-4 py-2 border-b border-white/[0.04]">
                            <span class="w-2 h-2 rounded-full bg-white/10"></span>
                            <span class="w-2 h-2 rounded-full bg-white/10"></span>
                            <span class="w-2 h-2 rounded-full bg-white/10"></span>
                            <span class="ml-2 text-[11px] text-gray-500 font-mono">Program.cs</span>
                        </div>
                        <pre class="px-5 py-4 overflow-x-auto"><code class="font-mono text-sm">builder.<span class="text-violet-400">UseTailwind</span>(options <span class="text-violet-400">=&gt;</span>
{
    options.InputFile = <span class="text-green-400">"Styles/app.css"</span>;
    options.OutputFile = <span class="text-green-400">"wwwroot/css/tailwind.css"</span>;
    options.CliPath = <span class="text-green-400">"/custom/path/to/tailwindcss"</span>;
    options.TailwindVersion = <span class="text-green-400">"4.1.18"</span>;
});</code></pre>
                    </div>
                </div>

                <!-- appsettings -->
                <div id="appsettings" class="mb-12">
                    <h3 class="text-xl font-semibold mb-4">appsettings.json</h3>
                    <p class="text-sm text-gray-400 mb-4">
                        Options are also bound from the <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">Tailwind</code> configuration section:
                    </p>
                    <div class="rounded-xl bg-white/[0.03] border border-white/[0.06] overflow-hidden">
                        <div class="flex items-center gap-2 px-4 py-2 border-b border-white/[0.04]">
                            <span class="w-2 h-2 rounded-full bg-white/10"></span>
                            <span class="w-2 h-2 rounded-full bg-white/10"></span>
                            <span class="w-2 h-2 rounded-full bg-white/10"></span>
                            <span class="ml-2 text-[11px] text-gray-500 font-mono">appsettings.json</span>
                        </div>
                        <pre class="px-5 py-4 overflow-x-auto"><code class="font-mono text-sm">{
  <span class="text-violet-400">"Tailwind"</span>: {
    <span class="text-violet-400">"InputFile"</span>: <span class="text-green-400">"Styles/app.css"</span>,
    <span class="text-violet-400">"OutputFile"</span>: <span class="text-green-400">"wwwroot/css/tailwind.css"</span>,
    <span class="text-violet-400">"TailwindVersion"</span>: <span class="text-green-400">"4.1.18"</span>
  }
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- How It Works -->
            <section id="how-it-works" class="mb-20">
                <h2 class="text-3xl font-bold tracking-tight mb-4">How It Works</h2>

                <div class="space-y-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-3 flex items-center gap-2">
                            <span class="w-7 h-7 rounded-lg bg-violet-400/10 flex items-center justify-center text-xs font-bold text-violet-400">B</span>
                            At Build Time
                        </h3>
                        <div class="pl-9 space-y-2 text-sm text-gray-400 leading-relaxed">
                            <p>MSBuild targets run <strong class="text-gray-300">before</strong> compilation:</p>
                            <ol class="list-decimal list-inside space-y-1.5 pl-1">
                                <li>Detect your OS and CPU architecture</li>
                                <li>Download the Tailwind CLI binary to <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">~/.tailwindblazor/cli/&lt;version&gt;/</code> (cached — only on first build)</li>
                                <li>Run <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">tailwindcss -i &lt;input&gt; -o &lt;output&gt;</code> to generate the CSS</li>
                                <li>In Release mode, <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">--minify</code> is applied automatically</li>
                            </ol>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-xl font-semibold mb-3 flex items-center gap-2">
                            <span class="w-7 h-7 rounded-lg bg-violet-400/10 flex items-center justify-center text-xs font-bold text-violet-400">D</span>
                            At Dev Time
                        </h3>
                        <div class="pl-9 space-y-2 text-sm text-gray-400 leading-relaxed">
                            <p>When the environment is <strong class="text-gray-300">Development</strong>, the hosted service:</p>
                            <ol class="list-decimal list-inside space-y-1.5 pl-1">
                                <li>Ensures the CLI is downloaded</li>
                                <li>Starts <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">tailwindcss --watch</code> as a background process</li>
                                <li>Streams CLI output to <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">ILogger</code></li>
                                <li>Kills the entire process tree on application shutdown</li>
                            </ol>
                        </div>
                    </div>

                    <div class="p-5 rounded-xl bg-violet-400/[0.06] border border-violet-400/[0.12]">
                        <p class="text-sm text-gray-300">
                            <span class="font-semibold text-violet-400">Build vs Runtime:</span>
                            MSBuild targets handle CSS generation for <code class="font-mono text-xs px-1 py-0.5 rounded bg-white/[0.06]">dotnet build</code> and
                            <code class="font-mono text-xs px-1 py-0.5 rounded bg-white/[0.06]">dotnet publish</code>.
                            The hosted service adds watch mode for live development. Both mechanisms work independently — you get CSS generation
                            even without calling <code class="font-mono text-xs px-1 py-0.5 rounded bg-white/[0.06]">UseTailwind()</code>.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Platforms -->
            <section id="platforms" class="mb-20">
                <h2 class="text-3xl font-bold tracking-tight mb-4">Supported Platforms</h2>
                <p class="text-gray-400 mb-6 leading-relaxed">
                    The correct CLI binary is resolved automatically based on your OS and CPU architecture.
                </p>

                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="border-b border-white/[0.06]">
                                <th class="text-left py-3 pr-8 text-gray-400 font-medium">Operating System</th>
                                <th class="text-left py-3 pr-8 text-gray-400 font-medium">Architecture</th>
                                <th class="text-left py-3 text-gray-400 font-medium">CLI Binary</th>
                            </tr>
                        </thead>
                        <tbody class="font-mono text-xs">
                            <tr class="border-b border-white/[0.04]">
                                <td class="py-3 pr-8 text-gray-300 font-sans text-sm">Windows</td>
                                <td class="py-3 pr-8 text-gray-400">x64</td>
                                <td class="py-3 text-violet-400/70">tailwindcss-windows-x64.exe</td>
                            </tr>
                            <tr class="border-b border-white/[0.04]">
                                <td class="py-3 pr-8 text-gray-300 font-sans text-sm">macOS</td>
                                <td class="py-3 pr-8 text-gray-400">x64</td>
                                <td class="py-3 text-violet-400/70">tailwindcss-macos-x64</td>
                            </tr>
                            <tr class="border-b border-white/[0.04]">
                                <td class="py-3 pr-8 text-gray-300 font-sans text-sm">macOS</td>
                                <td class="py-3 pr-8 text-gray-400">ARM64</td>
                                <td class="py-3 text-violet-400/70">tailwindcss-macos-arm64</td>
                            </tr>
                            <tr class="border-b border-white/[0.04]">
                                <td class="py-3 pr-8 text-gray-300 font-sans text-sm">Linux</td>
                                <td class="py-3 pr-8 text-gray-400">x64</td>
                                <td class="py-3 text-violet-400/70">tailwindcss-linux-x64</td>
                            </tr>
                            <tr>
                                <td class="py-3 pr-8 text-gray-300 font-sans text-sm">Linux</td>
                                <td class="py-3 pr-8 text-gray-400">ARM64</td>
                                <td class="py-3 text-violet-400/70">tailwindcss-linux-arm64</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Troubleshooting -->
            <section id="troubleshooting" class="mb-20">
                <h2 class="text-3xl font-bold tracking-tight mb-4">Troubleshooting</h2>

                <div class="space-y-6">
                    <div class="p-5 rounded-xl bg-white/[0.02] border border-white/[0.06]">
                        <h4 class="font-semibold mb-2">CLI download fails</h4>
                        <p class="text-sm text-gray-400 leading-relaxed">
                            Check your internet connection and firewall settings. The CLI is downloaded from
                            <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">github.com/tailwindlabs/tailwindcss/releases</code>.
                            You can also download it manually and set <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">TailwindCliPath</code> in your .csproj
                            or <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">options.CliPath</code> in C#.
                        </p>
                    </div>

                    <div class="p-5 rounded-xl bg-white/[0.02] border border-white/[0.06]">
                        <h4 class="font-semibold mb-2">CSS is empty or missing classes</h4>
                        <p class="text-sm text-gray-400 leading-relaxed">
                            Tailwind v4 scans your project files automatically. Make sure your <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">.razor</code> files
                            are in the project directory. If using a non-standard structure, check that the CLI can find your content files.
                        </p>
                    </div>

                    <div class="p-5 rounded-xl bg-white/[0.02] border border-white/[0.06]">
                        <h4 class="font-semibold mb-2">Watch mode not starting</h4>
                        <p class="text-sm text-gray-400 leading-relaxed">
                            The hosted service only runs when <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">ASPNETCORE_ENVIRONMENT=Development</code>.
                            Make sure you're running with <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">dotnet watch</code> or
                            <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">dotnet run</code> in development mode.
                        </p>
                    </div>

                    <div class="p-5 rounded-xl bg-white/[0.02] border border-white/[0.06]">
                        <h4 class="font-semibold mb-2">Want to disable Tailwind for a specific build?</h4>
                        <p class="text-sm text-gray-400 leading-relaxed">
                            Pass <code class="font-mono text-xs text-violet-400/60 px-1 py-0.5 rounded bg-white/[0.04]">dotnet build -p:TailwindEnabled=false</code>
                            to skip CSS generation entirely.
                        </p>
                    </div>
                </div>
            </section>

        </div>
    </div>
</div>

@code {
    private static readonly (string Id, string Label, bool Indent)[] _sections =
    [
        ("getting-started", "Getting Started", false),
        ("configuration", "Configuration", false),
        ("msbuild-properties", "MSBuild Properties", true),
        ("csharp-options", "C# Options", true),
        ("appsettings", "appsettings.json", true),
        ("how-it-works", "How It Works", false),
        ("platforms", "Platforms", false),
        ("troubleshooting", "Troubleshooting", false),
    ];
}
